{
  "$schema": "Part A → Part B API Contract",
  "version": "3.0",
  "description": "TCO data export format from Part A consumed by Part B. Consumable-based TCO pipeline.",
  "endpoint": "JSON file export (data/exports/tco_{category}.json)",

  "intermediate_schemas": {
    "a2_consumable": {
      "description": "Claude WebSearch로 수집한 소모품 가격 데이터 (data/processed/a2_consumable_{category}.json)",
      "schema": {
        "category": "string",
        "searched_at": "ISO 8601 datetime",
        "source": "claude_web_search",
        "products": [
          {
            "product_name": "string (제품 전체명)",
            "annual_consumable_cost": "number (KRW, 연간 소모품 총비용)",
            "consumables": [
              {
                "name": "string (소모품명: 필터, 사이드브러시, 먼지봉투 등)",
                "unit_price": "number (KRW, 개당 가격)",
                "replacement_cycle_months": "number (교체 주기, 월)",
                "changes_per_year": "number (연간 교체 횟수)",
                "annual_cost": "number (KRW, unit_price × changes_per_year)",
                "compatible_available": "boolean (호환품 유무)",
                "compatible_price": "number | null (KRW, 호환품 가격)"
              }
            ],
            "notes": "string (검색 특이사항)"
          }
        ]
      }
    },
    "a5_reviews": {
      "description": "Claude WebSearch로 수집한 리뷰 인사이트 (data/processed/a5_reviews_{category}.json)",
      "schema": {
        "total_reviews_analyzed": "number",
        "review_sources": ["string"],
        "products": [
          {
            "product_name": "string",
            "reviews_collected": "number",
            "purchase_motivations": ["string"],
            "sentiment_keywords": {
              "positive": ["string"],
              "negative": ["string"]
            },
            "hidden_differentiator": "string",
            "environment_splits": ["string"],
            "as_reputation": "string (positive|neutral|negative)",
            "as_reputation_summary": "string (AS 평판 요약, 정성적)"
          }
        ]
      }
    }
  },

  "schema": {
    "category": "string (e.g., '로봇청소기')",
    "generated_at": "ISO 8601 datetime",
    "selected_tier": "string (선택된 가격 티어)",
    "credibility": {
      "product_count": "number",
      "candidate_pool_size": "number",
      "total_reviews_analyzed": "number",
      "review_sources": ["string"],
      "data_pipeline": "string"
    },
    "products": [
      {
        "product_id": "string",
        "name": "string",
        "brand": "string",
        "release_date": "YYYY-MM-DD",
        "source_a0_rank": "number",
        "a0_total_score": "number",
        "tco": {
          "purchase_price": "number (KRW, A0 Naver Shopping lprice)",
          "annual_consumable_cost": "number (KRW, 연간 소모품 비용)",
          "consumable_cost_3yr": "number (KRW, = annual_consumable_cost × 3)",
          "real_cost_3yr": "number (KRW, = purchase_price + consumable_cost_3yr)",
          "consumable_breakdown": [
            {
              "name": "string",
              "unit_price": "number (KRW)",
              "replacement_cycle_months": "number",
              "changes_per_year": "number",
              "annual_cost": "number (KRW)",
              "compatible_available": "boolean",
              "compatible_price": "number | null (KRW)"
            }
          ]
        },
        "review_insights": {
          "reviews_collected": "number",
          "purchase_motivations": ["string"],
          "sentiment_keywords": "object",
          "hidden_differentiator": "string",
          "environment_splits": ["string"]
        },
        "as_reputation": "string (optional, from A5)",
        "as_reputation_summary": "string (optional, from A5)"
      }
    ],
    "summary": {
      "cheapest": {"name": "string", "real_cost_3yr": "number"},
      "most_expensive": {"name": "string", "real_cost_3yr": "number"},
      "cost_difference": "number (KRW)",
      "cost_difference_pct": "number (%)"
    }
  }
}
